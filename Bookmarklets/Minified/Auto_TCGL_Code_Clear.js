javascript:(async()=>{console.time("Time taken");const redeemPage="https://redeem.tcg.pokemon.com/en-us/";if(window.location.href!==redeemPage){console.log(`Please run this bookmarklet on the TCG Redeem page:\n${ redeemPage }`);return}const clipboardText=await navigator.clipboard.readText();const codes=clipboardText.split(/\r?\n/).map(line=>line.trim()).filter(Boolean);const codesUnique=[...new Set(codes)];if(codesUnique.length===0){console.log("Please copy at least 1 code to your clipboard before running this bookmarklet");return}const inputSelector='._typeText_1h9p4_1.undefined';const redeemButtonSelector='._blueButton_2fvxv_1._verifyredeemButton_14nmk_77';const clearButtonSelector='._redButton_2fvxv_1._clearTableButton_oelca_33';const sleep=ms=>new Promise(resolve=>setTimeout(resolve,ms));async function waitForEmptyInput(){const input=document.querySelector(inputSelector);if(!input){throw new Error("Could not find input field")}while(input.value.trim()!==""){await sleep(100)}}async function clearInputField(){const input=document.querySelector(inputSelector);if(!input){throw new Error("Could not find input field")}const valueSetter=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(input),"value").set;valueSetter.call(input,"");input.dispatchEvent(new Event("input",{bubbles:true}));input.dispatchEvent(new Event("change",{bubbles:true}));await waitForEmptyInput()}async function enterCode(code){const input=document.querySelector(inputSelector);const redeemButton=document.querySelector(redeemButtonSelector);if(!input||!redeemButton){throw new Error("Could not find input field or submit button")}await waitForEmptyInput();const valueSetter=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(input),"value").set;valueSetter.call(input,code);input.dispatchEvent(new Event("input",{bubbles:true}));input.dispatchEvent(new Event("change",{bubbles:true}));redeemButton.click();await sleep(2500);await clearInputField()}try{console.log(`Total submissions: ${codesUnique.length }`);console.log("Clearing input before starting...");await clearInputField();let batchNum=0;for(let i=0;i<codesUnique.length;i+=1){batchNum+=1;console.log(`Redeeming code ${codesUnique[i]}`);console.log(`In all: Code ${i+1} of ${codesUnique.length }`);console.log(`In batch: Code ${ batchNum } of 10`);await enterCode(codesUnique[i]);if(batchNum===10){const clearButton=document.querySelector(clearButtonSelector);if(clearButton){console.log("Clearing 10 codes");clearButton.click();await sleep(2500)}batchNum=0}}if(batchNum>0){const clearButton=document.querySelector(clearButtonSelector);if(clearButton){console.log(`Clearing ${ batchNum } code${batchNum>1?"s":""}`);clearButton.click();await sleep(2500)}}console.log(`${codesUnique.length } unique codes cleared!`)}catch(err){console.log(`Error: ${err.message }`)}console.timeEnd("Time taken")})();